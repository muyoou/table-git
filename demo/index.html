<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Table-Git 交互式演示</title>
    <style>
      :root{--bg:#fff;--muted:#666;--bd:#ddd;--pri:#0b5cff}
      *{box-sizing:border-box}
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans",sans-serif;margin:24px;background:var(--bg)}
      h1{margin:0 0 12px;font-size:22px}
      h2{font-size:16px;margin:16px 0 8px}
      .row{display:flex;gap:16px;align-items:flex-start;flex-wrap:wrap}
      .card{border:1px solid var(--bd);border-radius:10px;padding:12px;background:#fff;box-shadow:0 1px 2px rgba(0,0,0,.03)}
      .controls{display:flex;gap:8px;flex-wrap:wrap}
      button{padding:6px 10px;border:1px solid var(--bd);background:#fff;border-radius:8px;cursor:pointer}
  button.mini{padding:2px 6px; font-size:12px}
      button.primary{background:var(--pri);color:#fff;border-color:var(--pri)}
      input,select{padding:6px 8px;border:1px solid var(--bd);border-radius:8px}
      .grid{border:1px solid var(--bd);border-radius:8px;overflow:auto;max-height:320px}
      table{border-collapse:collapse;width:100%}
      th,td{border:1px solid var(--bd);padding:6px 8px;text-align:left}
  .cols{font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial; font-size:13px}
  .cols ul{margin:6px 0 0 18px; padding:0}
  .cols li{margin:2px 0}
      .muted{color:var(--muted)}
      .tabs{display:flex;gap:8px;margin-bottom:8px}
      .tabs button.active{background:var(--pri);color:#fff;border-color:var(--pri)}
      pre{padding:10px;background:#f7f7f7;border:1px solid #eee;border-radius:8px;overflow:auto;max-height:340px}
      iframe{width:100%;height:320px;border:1px solid var(--bd);border-radius:8px;background:#fff}
      .col{flex:1;min-width:320px}
    </style>
  </head>
  <body>
    <h1>Table-Git 交互式演示</h1>
    <div class="row">
      <div class="card col">
        <h2>操作</h2>
        <div class="controls">
          <button id="btn-init" class="primary">初始化示例数据</button>
        </div>
        <div class="controls">
          <input id="branch" placeholder="分支名" value="price-update" />
          <button id="btn-create-branch">创建分支</button>
        </div>
        <div class="controls">
          <input id="commit-message" placeholder="提交消息" style="min-width:220px" />
          <input id="commit-author" placeholder="提交人" value="User" />
          <input id="commit-email" placeholder="邮箱" value="user@example.com" />
          <button id="btn-commit" class="primary">提交变更</button>
        </div>
        <div class="muted" id="status"></div>
        <div class="muted" id="active-sheet"></div>
        <h2>工作表操作</h2>
        <div class="controls">
          <input id="sheet-name" placeholder="新工作表名" />
          <button id="btn-create-sheet">新增工作表</button>
          <button id="btn-duplicate-sheet">复制当前</button>
        </div>
        <div class="controls">
          <input id="sheet-rename" placeholder="当前工作表新名称" />
          <button id="btn-rename-sheet">重命名</button>
          <button id="btn-delete-sheet">删除</button>
        </div>
      </div>

      <div class="card col">
        <h2>工作表</h2>
        <div id="sheets" class="cols">(初始化后显示)</div>
        <h2>列结构</h2>
        <div id="columns" class="cols">(初始化后显示)</div>
        <h2>分支</h2>
        <div id="branches" class="cols">(初始化后显示)</div>
  <h2>暂存区</h2>
  <div id="staged" class="cols">(初始化后显示)</div>
        <h2>提交历史</h2>
        <div id="history" class="cols">(初始化后显示)</div>
      </div>
    </div>

    <div class="row" style="margin-top:16px">
      <div class="card col">
        <h2>表格数据</h2>
        <div class="controls">
          <button id="btn-insert-col">插入列</button>
          <button id="btn-insert-row">插入行</button>
          <input id="col-index" placeholder="列索引" style="width:80px" />
          <button id="btn-delete-col-index">删除列(索引)</button>
          <input id="row-index" placeholder="行索引" style="width:80px" />
          <button id="btn-delete-row-index">删除行(索引)</button>
        </div>
        <div id="grid" class="grid"></div>
      </div>
      <div class="card col">
        <h2>格式化预览</h2>
  <div id="previewFrom" class="muted" style="margin:4px 0 8px"></div>
        <div class="tabs">
          <button data-tab="html" class="active">HTML</button>
          <button data-tab="csv">CSV</button>
          <button data-tab="json">JSON</button>
        </div>
        <section id="panel-html" class="panel" style="display:block"><iframe id="htmlFrame"></iframe></section>
        <section id="panel-csv" class="panel" style="display:none"><pre id="csvOut"></pre></section>
        <section id="panel-json" class="panel" style="display:none"><pre id="jsonOut"></pre></section>
      </div>
    </div>

    <script src="bundle.js"></script>
  </body>
  </html>
